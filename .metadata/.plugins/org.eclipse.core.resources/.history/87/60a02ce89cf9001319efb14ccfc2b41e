package base_testes.realizar_vendas;
import java.util.ArrayList;
import java.util.List;

public class Venda {

	private List<Produto> carrinho;
	private boolean finalizada;

	public Venda() {
		super();
		carrinho = new ArrayList<>();
		this.finalizada = false;
	}

	public boolean isFinalizada() {
		return finalizada;
	}

	public List<Produto> getCarrinho() {
		return carrinho;
	}

	public void comprarProduto(Conta conta) {

		if (valorTotal() <= conta.getSaldo() && isFinalizada() == false) {

			conta.setSaldo(conta.getSaldo() - valorTotal());
			System.out.println("Compra realizada com sucesso");
			finalizada = true;
		} else
			System.out.println("Saldo insuficiente ou venda já finalizada");
	}

	public void estornarVenda(Conta conta) {

		if (isFinalizada()) {

			conta.setSaldo(conta.getSaldo() + this.valorTotal());
			System.out.println("Venda cancelada");
		} else
			System.out.println("Venda em andamento");

	}

	private double valorTotal() {

		double valorTotal = 0;

		for (Produto p : carrinho) {
			valorTotal += p.getValor();
		}
		return valorTotal;

	}

	public void adicionarAoCarrinho(Produto produto) {

		if (isFinalizada() == false)
			carrinho.add(produto);
		else
			System.out
					.println("Não é possível adicionar mais ítens ao carrinho\n"
							+ "Venda já finalizada");
	}

	public static void main(String[] args) {

		// Conta conta0 = new Conta(new Pessoa("Joãozinho", "631130033"), 100);
		//
		// Produto produto0 = new Produto("Caca cola", 3.35);
		//
		// Venda v0 = new Venda();
		//
		// v0.comprarProduto(conta0, produto0);
		//
		// System.out.println(conta0.getSaldo());
		//
		// Conta conta1 = new Conta(new Pessoa("Pedrinho", "6310040055"), 0);
		//
		// conta0.transferir(50.33, conta1);
		//
		// System.out.println("Conta remetente: " + conta0.getSaldo()
		// +"\nConta destino: " + conta1.getSaldo());

		// Conta conta0 = new Conta(new Pessoa("Joãozinho", "631130033"),
		// 20.00);
		//
		// Produto produto0 = new Produto("Coca cola", 3.35);
		// Produto produto1 = new Produto("Salgado", 2.65);
		// Produto produto2 = new Produto("Pacote de balas", 2.10);
		//
		// Venda v0 = new Venda();
		//
		// v0.adicionarAoCarrinho(produto0);
		// v0.adicionarAoCarrinho(produto1);
		// v0.adicionarAoCarrinho(produto2);
		//
		// v0.comprarProduto(conta0);
		//
		// System.out.println("Saldo do cliente 0: " + conta0.getSaldo());
		//
		// v0.estornarVenda(conta0);
		//
		// System.out.println("Saldo do cliente 0: " + conta0.getSaldo());

	}

}
